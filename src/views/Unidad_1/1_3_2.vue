<template>
  <div class="container mx-auto px-4 py-6">
    <HeaderTitle numero="1.3" titulo="1.3.2 Operaciones sobre conjuntos">
      <!-- Explicaci√≥n te√≥rica -->
      <div class="mb-8">
        <p class="text-gray-700 mb-4">
          Los conjuntos en Python soportan operaciones matem√°ticas que los hacen especialmente √∫tiles
          para comparar y combinar colecciones de elementos √∫nicos.
        </p>
        <p class="text-gray-700">
          Estas operaciones permiten realizar an√°lisis de datos, filtrado y combinaciones
          de manera eficiente y elegante.
        </p>
      </div>
    </HeaderTitle>

    <!-- Operaciones principales -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
      <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
        <div class="w-10 h-10 bg-blue-500 text-white rounded-lg flex items-center justify-center mb-3">
          <i class="fas fa-plus"></i>
        </div>
        <h3 class="font-bold text-blue-800 mb-2">Uni√≥n (|)</h3>
        <p class="text-blue-700 text-sm">Elementos en A o B</p>
      </div>
      <div class="bg-green-50 border border-green-200 rounded-xl p-4">
        <div class="w-10 h-10 bg-green-500 text-white rounded-lg flex items-center justify-center mb-3">
          <i class="fas fa-times"></i>
        </div>
        <h3 class="font-bold text-green-800 mb-2">Intersecci√≥n (&)</h3>
        <p class="text-green-700 text-sm">Elementos en A y B</p>
      </div>
      <div class="bg-red-50 border border-red-200 rounded-xl p-4">
        <div class="w-10 h-10 bg-red-500 text-white rounded-lg flex items-center justify-center mb-3">
          <i class="fas fa-minus"></i>
        </div>
        <h3 class="font-bold text-red-800 mb-2">Diferencia (-)</h3>
        <p class="text-red-700 text-sm">Elementos en A pero no en B</p>
      </div>
      <div class="bg-purple-50 border border-purple-200 rounded-xl p-4">
        <div class="w-10 h-10 bg-purple-500 text-white rounded-lg flex items-center justify-center mb-3">
          <i class="fas fa-code-branch"></i>
        </div>
        <h3 class="font-bold text-purple-800 mb-2">Diferencia Sim√©trica (^)</h3>
        <p class="text-purple-700 text-sm">Elementos en A o B pero no en ambos</p>
      </div>
      <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4">
        <div class="w-10 h-10 bg-yellow-500 text-white rounded-lg flex items-center justify-center mb-3">
          <i class="fas fa-equals"></i>
        </div>
        <h3 class="font-bold text-yellow-800 mb-2">Subconjunto (<=)</h3>
            <p class="text-yellow-700 text-sm">Todos los elementos de A est√°n en B</p>
      </div>
    </div>

    <!-- Diagrama visual de operaciones -->
    <div class="mb-8 p-6 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl">
      <h3 class="text-xl font-semibold mb-4 text-gray-800 text-center">Visualizaci√≥n de operaciones</h3>
      <div class="flex flex-col items-center">
        <div class="flex justify-center space-x-8 mb-6">
          <div class="text-center">
            <div class="mb-2 font-medium text-blue-600">Conjunto A</div>
            <div class="w-32 h-32 bg-blue-100 border-2 border-blue-300 rounded-full flex items-center justify-center">
              <div class="text-center">
                <div class="font-bold">1, 2, 3</div>
                <div class="text-sm text-blue-600">A = {1, 2, 3}</div>
              </div>
            </div>
          </div>
          <div class="text-center">
            <div class="mb-2 font-medium text-green-600">Conjunto B</div>
            <div class="w-32 h-32 bg-green-100 border-2 border-green-300 rounded-full flex items-center justify-center">
              <div class="text-center">
                <div class="font-bold">3, 4, 5</div>
                <div class="text-sm text-green-600">B = {3, 4, 5}</div>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="text-center">
            <div class="text-sm font-medium text-blue-700 mb-1">A | B</div>
            <div class="px-3 py-2 bg-white border border-blue-200 rounded-lg">
              {1, 2, 3, 4, 5}
            </div>
          </div>
          <div class="text-center">
            <div class="text-sm font-medium text-green-700 mb-1">A & B</div>
            <div class="px-3 py-2 bg-white border border-green-200 rounded-lg">
              {3}
            </div>
          </div>
          <div class="text-center">
            <div class="text-sm font-medium text-red-700 mb-1">A - B</div>
            <div class="px-3 py-2 bg-white border border-red-200 rounded-lg">
              {1, 2}
            </div>
          </div>
          <div class="text-center">
            <div class="text-sm font-medium text-purple-700 mb-1">A ^ B</div>
            <div class="px-3 py-2 bg-white border border-purple-200 rounded-lg">
              {1, 2, 4, 5}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ejemplo 1: Operaciones b√°sicas -->
    <div class="mb-8">
      <h3 class="text-xl font-semibold mb-4 text-gray-800">Ejemplo 1: Operaciones b√°sicas</h3>
      <PythonRunner :code="ejemplo1Code" title="operaciones_basicas.py" :showLineNumbers="true" initialHeight="300px" />
    </div>

    <!-- Ejemplo 2: Creaci√≥n y m√©todos -->
    <div class="mb-8">
      <h3 class="text-xl font-semibold mb-4 text-gray-800">Ejemplo 2: Creaci√≥n y m√©todos de conjuntos</h3>
      <PythonRunner :code="ejemplo2Code" title="creacion_metodos.py" :showLineNumbers="true" initialHeight="280px" />
    </div>

    <!-- Ejemplo 3: Sistema de recomendaci√≥n -->
    <div class="mb-8">
      <h3 class="text-xl font-semibold mb-4 text-gray-800">Ejemplo 3: Sistema de recomendaci√≥n de pel√≠culas</h3>
      <p class="text-gray-700 mb-4">
        Usando operaciones de conjuntos para recomendar pel√≠culas basadas en gustos comunes:
      </p>
      <PythonRunner :code="ejemplo3Code" title="recomendacion_peliculas.py" :showLineNumbers="true"
        initialHeight="320px" />
    </div>

    <!-- Ejercicio pr√°ctico -->
    <!-- <div class="mb-8 p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg">
      <h3 class="text-xl font-semibold mb-4 text-gray-800">Ejercicio pr√°ctico: An√°lisis de habilidades</h3>
      <p class="text-gray-700 mb-4">
        <strong>Situaci√≥n:</strong> Analiza las habilidades de dos equipos de desarrollo para planificar capacitaciones.
      </p>

      <PythonRunner :code="ejercicioCode" title="analisis_habilidades.py" :showLineNumbers="true" initialHeight="280px"
        :showReset="true" :showSolution="true" :solutionCode="solucionCode" />
    </div> -->

    <!-- Tabla de m√©todos -->
    <div class="mb-8 p-6 bg-gray-50 rounded-xl">
      <h3 class="text-xl font-semibold mb-4 text-gray-800">M√©todos de conjuntos</h3>
      <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
          <thead class="bg-gray-100">
            <tr>
              <th class="py-3 px-4 text-left font-semibold text-gray-700 border-b">M√©todo</th>
              <th class="py-3 px-4 text-left font-semibold text-gray-700 border-b">Descripci√≥n</th>
              <th class="py-3 px-4 text-left font-semibold text-gray-700 border-b">Ejemplo</th>
            </tr>
          </thead>
          <tbody>
            <tr class="hover:bg-blue-50">
              <td class="py-3 px-4 border-b font-mono">add(x)</td>
              <td class="py-3 px-4 border-b">Agrega elemento x</td>
              <td class="py-3 px-4 border-b font-mono">s.add(5)</td>
            </tr>
            <tr class="hover:bg-red-50">
              <td class="py-3 px-4 border-b font-mono">remove(x)</td>
              <td class="py-3 px-4 border-b">Elimina x (error si no existe)</td>
              <td class="py-3 px-4 border-b font-mono">s.remove(5)</td>
            </tr>
            <tr class="hover:bg-green-50">
              <td class="py-3 px-4 border-b font-mono">discard(x)</td>
              <td class="py-3 px-4 border-b">Elimina x (sin error si no existe)</td>
              <td class="py-3 px-4 border-b font-mono">s.discard(5)</td>
            </tr>
            <tr class="hover:bg-purple-50">
              <td class="py-3 px-4 border-b font-mono">update(t)</td>
              <td class="py-3 px-4 border-b">Agrega elementos del iterable t</td>
              <td class="py-3 px-4 border-b font-mono">s.update([4,5,6])</td>
            </tr>
            <tr class="hover:bg-yellow-50">
              <td class="py-3 px-4 font-mono">clear()</td>
              <td class="py-3 px-4">Elimina todos los elementos</td>
              <td class="py-3 px-4 font-mono">s.clear()</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Quiz funcional -->
    <QuizQuestions :preguntas="preguntas" titulo="Quiz de operaciones con conjuntos"></QuizQuestions>

    <!-- Navegaci√≥n -->
    <NavigationUnidad anterior="/Unidad/1.3.1" siguiente="/Unidad/1.3.3" textoAnterior="Anterior"
      textoSiguiente="Siguiente" tituloActual="Unidad I ‚Ä¢ Contenedores" mostrarAnterior="true"
      mostrarSiguiente="true" />

  </div>
</template>

<script setup>

import PythonRunner from '@/components/PythonRun.vue'
import HeaderTitle from "@/components/HeaderTitle.vue"
import QuizQuestions from '@/components/QuizQuestions.vue'
import NavigationUnidad from "@/components/NavigationUnidad.vue"

// C√≥digos de ejemplo
const ejemplo1Code = `# Operaciones b√°sicas con conjuntos

# Definir dos conjuntos
A = {1, 2, 3, 4, 5}
B = {4, 5, 6, 7, 8}

print("Conjunto A:", A)
print("Conjunto B:", B)

# UNI√ìN: elementos en A o B
union = A | B  # Tambi√©n: A.union(B)
print("\\nUni√≥n (A | B):", union)
print("M√©todo union():", A.union(B))

# INTERSECCI√ìN: elementos en A y B
interseccion = A & B  # Tambi√©n: A.intersection(B)
print("\\nIntersecci√≥n (A & B):", interseccion)
print("M√©todo intersection():", A.intersection(B))

# DIFERENCIA: elementos en A pero no en B
diferencia = A - B  # Tambi√©n: A.difference(B)
print("\\nDiferencia (A - B):", diferencia)
print("Diferencia (B - A):", B - A)

# DIFERENCIA SIM√âTRICA: elementos en A o B pero no en ambos
diferencia_simetrica = A ^ B  # Tambi√©n: A.symmetric_difference(B)
print("\\nDiferencia sim√©trica (A ^ B):", diferencia_simetrica)

# SUBCONJUNTO
C = {2, 3}
print("\\nConjunto C:", C)
print("¬øC es subconjunto de A?:", C <= A)  # C ‚äÜ A
print("¬øA es superconjunto de C?:", A >= C)  # A ‚äá C

# DISJUNTOS (sin elementos en com√∫n)
D = {9, 10}
print("\\nConjunto D:", D)
print("¬øA y D son disjuntos?:", A.isdisjoint(D))
print("¬øA y B son disjuntos?:", A.isdisjoint(B))`

const ejemplo2Code = `# Creaci√≥n y m√©todos de conjuntos

# Diferentes formas de crear conjuntos
print("=== CREACI√ìN DE CONJUNTOS ===")

# 1. Usando llaves
conjunto1 = {1, 2, 3, 4, 5}
print("1. Con llaves:", conjunto1)

# 2. Usando set() con lista
conjunto2 = set([5, 6, 7, 8, 9])
print("2. Con set([...]):", conjunto2)

# 3. Conjunto por comprensi√≥n
conjunto3 = {x for x in range(10) if x % 2 == 0}
print("3. Por comprensi√≥n (pares):", conjunto3)

# 4. Conjunto vac√≠o (¬°importante!)
conjunto_vacio = set()  # NO usar {} que crea diccionario
print("4. Conjunto vac√≠o:", conjunto_vacio)

print("\\n=== M√âTODOS DE MODIFICACI√ìN ===")

# Crear un conjunto para modificar
mi_set = {1, 2, 3}
print("Conjunto inicial:", mi_set)

# add() - agregar un elemento
mi_set.add(4)
print("Despu√©s de add(4):", mi_set)

# add() con elemento existente (no hace nada)
mi_set.add(2)
print("Despu√©s de add(2) (ya existe):", mi_set)

# update() - agregar m√∫ltiples elementos
mi_set.update([5, 6, 7])
print("Despu√©s de update([5,6,7]):", mi_set)

# remove() - eliminar elemento (error si no existe)
mi_set.remove(3)
print("Despu√©s de remove(3):", mi_set)

# discard() - eliminar elemento (sin error si no existe)
mi_set.discard(10)  # No existe, pero no da error
print("Despu√©s de discard(10) (no existe):", mi_set)

# pop() - eliminar y retornar elemento aleatorio
elemento = mi_set.pop()
print(f"Elemento pop(): {elemento}")
print("Despu√©s de pop():", mi_set)

# clear() - vaciar conjunto
mi_set.clear()
print("Despu√©s de clear():", mi_set)`

const ejemplo3Code = `# Sistema de recomendaci√≥n de pel√≠culas

class SistemaRecomendacion:
    def __init__(self):
        self.gustos_usuarios = {}
    
    def registrar_gustos(self, usuario, *peliculas):
        """Registra las pel√≠culas que le gustan a un usuario"""
        if usuario not in self.gustos_usuarios:
            self.gustos_usuarios[usuario] = set()
        self.gustos_usuarios[usuario].update(peliculas)
        print(f"‚úì {usuario}: {len(peliculas)} pel√≠culas registradas")
    
    def peliculas_comunes(self, usuario1, usuario2):
        """Encuentra pel√≠culas que gustan a ambos usuarios"""
        if usuario1 in self.gustos_usuarios and usuario2 in self.gustos_usuarios:
            comunes = self.gustos_usuarios[usuario1] & self.gustos_usuarios[usuario2]
            return comunes
        return set()
    
    def recomendar_peliculas(self, usuario):
        """Recomienda pel√≠culas basadas en gustos similares"""
        if usuario not in self.gustos_usuarios:
            return set()
        
        recomendaciones = set()
        mi_set = self.gustos_usuarios[usuario]
        
        for otro_usuario, gustos in self.gustos_usuarios.items():
            if otro_usuario != usuario:
                # Pel√≠culas que le gustan al otro usuario pero no al actual
                nuevas = gustos - mi_set
                recomendaciones.update(nuevas)
        
        return recomendaciones
    
    def analizar_comunidad(self):
        """Analiza los gustos de toda la comunidad"""
        if not self.gustos_usuarios:
            return {}
        
        # Todas las pel√≠culas vistas por alguien
        todas_peliculas = set()
        for gustos in self.gustos_usuarios.values():
            todas_peliculas.update(gustos)
        
        # Pel√≠culas populares (vistas por al menos 2 usuarios)
        peliculas_populares = set()
        for pelicula in todas_peliculas:
            contador = 0
            for gustos in self.gustos_usuarios.values():
                if pelicula in gustos:
                    contador += 1
            if contador >= 2:
                peliculas_populares.add(pelicula)
        
        return {
            "total_usuarios": len(self.gustos_usuarios),
            "total_peliculas": len(todas_peliculas),
            "peliculas_populares": peliculas_populares
        }

# ========== USO DEL SISTEMA ==========
print("üé¨ SISTEMA DE RECOMENDACI√ìN DE PEL√çCULAS")
print("=" * 50)

sistema = SistemaRecomendacion()

# Registrar gustos de usuarios
sistema.registrar_gustos("Ana", "Inception", "Interstellar", "The Matrix", "Avatar")
sistema.registrar_gustos("Luis", "Inception", "Avatar", "Titanic", "Forrest Gump")
sistema.registrar_gustos("Carlos", "The Matrix", "Interstellar", "Gladiator", "Braveheart")
sistema.registrar_gustos("Mar√≠a", "Titanic", "Forrest Gump", "The Notebook", "Avatar")

print("\\nüîç PEL√çCULAS COMUNES:")
print("Ana y Luis:", sistema.peliculas_comunes("Ana", "Luis"))
print("Ana y Carlos:", sistema.peliculas_comunes("Ana", "Carlos"))

print("\\nüí° RECOMENDACIONES:")
print("Para Ana:", sistema.recomendar_peliculas("Ana"))
print("Para Luis:", sistema.recomendar_peliculas("Luis"))

print("\\nüìä AN√ÅLISIS DE LA COMUNIDAD:")
analisis = sistema.analizar_comunidad()
print(f"Total usuarios: {analisis['total_usuarios']}")
print(f"Total pel√≠culas √∫nicas: {analisis['total_peliculas']}")
print(f"Pel√≠culas populares (>1 usuario): {analisis['peliculas_populares']}")`

const ejercicioCode = `# EJERCICIO: An√°lisis de habilidades de equipos

# Habilidades de dos equipos de desarrollo
equipo_frontend = {"HTML", "CSS", "JavaScript", "React", "Vue", "TypeScript"}
equipo_backend = {"Python", "Django", "JavaScript", "SQL", "Docker", "TypeScript"}

# INSTRUCCIONES:
# 1. Encuentra habilidades comunes a ambos equipos
# habilidades_comunes = ...

# 2. Encuentra habilidades √∫nicas del equipo frontend
# solo_frontend = ...

# 3. Encuentra habilidades √∫nicas del equipo backend
# solo_backend = ...

# 4. Encuentra todas las habilidades disponibles en la empresa
# todas_habilidades = ...

# 5. Verifica si "Python" es una habilidad exclusiva del backend
# python_exclusivo = ...

# 6. Verifica si el equipo frontend tiene todas las habilidades b√°sicas
# habilidades_basicas = {"HTML", "CSS", "JavaScript"}
# tiene_basicas = ...

print("An√°lisis de Habilidades - Equipos de Desarrollo")
print("=" * 50)

print("\\nEquipo Frontend:", sorted(equipo_frontend))
print("Equipo Backend:", sorted(equipo_backend))

print("\\nüìä RESULTADOS DEL AN√ÅLISIS:")
print("Habilidades comunes:", habilidades_comunes)
print("Solo Frontend:", solo_frontend)
print("Solo Backend:", solo_backend)
print("Todas las habilidades:", todas_habilidades)
print("¬øPython exclusivo del backend?:", python_exclusivo)
print("¬øFrontend tiene habilidades b√°sicas?:", tiene_basicas)`

const solucionCode = `# SOLUCI√ìN: An√°lisis de habilidades de equipos

# Habilidades de dos equipos de desarrollo
equipo_frontend = {"HTML", "CSS", "JavaScript", "React", "Vue", "TypeScript"}
equipo_backend = {"Python", "Django", "JavaScript", "SQL", "Docker", "TypeScript"}

# 1. Habilidades comunes a ambos equipos
habilidades_comunes = equipo_frontend & equipo_backend

# 2. Habilidades √∫nicas del equipo frontend
solo_frontend = equipo_frontend - equipo_backend

# 3. Habilidades √∫nicas del equipo backend
solo_backend = equipo_backend - equipo_frontend

# 4. Todas las habilidades disponibles en la empresa
todas_habilidades = equipo_frontend | equipo_backend

# 5. Verificar si "Python" es exclusivo del backend
python_exclusivo = "Python" in solo_backend

# 6. Verificar si frontend tiene habilidades b√°sicas
habilidades_basicas = {"HTML", "CSS", "JavaScript"}
tiene_basicas = habilidades_basicas <= equipo_frontend  # subconjunto

print("An√°lisis de Habilidades - Equipos de Desarrollo")
print("=" * 50)

print("\\nEquipo Frontend:", sorted(equipo_frontend))
print("Equipo Backend:", sorted(equipo_backend))

print("\\nüìä RESULTADOS DEL AN√ÅLISIS:")
print("Habilidades comunes:", sorted(habilidades_comunes))
print("Solo Frontend:", sorted(solo_frontend))
print("Solo Backend:", sorted(solo_backend))
print("Todas las habilidades:", sorted(todas_habilidades))
print("¬øPython exclusivo del backend?:", python_exclusivo)
print("¬øFrontend tiene habilidades b√°sicas?:", tiene_basicas)

# Informaci√≥n adicional
print("\\nüìà ESTAD√çSTICAS ADICIONALES:")
print(f"Total habilidades √∫nicas en la empresa: {len(todas_habilidades)}")
print(f"Habilidades compartidas: {len(habilidades_comunes)}")
print(f"Habilidades exclusivas frontend: {len(solo_frontend)}")
print(f"Habilidades exclusivas backend: {len(solo_backend)}")

# Recomendaciones basadas en el an√°lisis
print("\\nüí° RECOMENDACIONES:")
if len(habilidades_comunes) > 0:
    print("1. Promover colaboraci√≥n en:", ", ".join(sorted(habilidades_comunes)))
if len(solo_frontend) > 0:
    print("2. El backend podr√≠a aprender:", ", ".join(sorted(solo_frontend))[:3])
if len(solo_backend) > 0:
    print("3. El frontend podr√≠a aprender:", ", ".join(sorted(solo_backend))[:3])`

// QUIZ FUNCIONAL
const preguntas = [
  {
    texto: "¬øQu√© operaci√≥n devuelve elementos que est√°n en el primer conjunto pero no en el segundo?",
    opciones: [
      { texto: "Uni√≥n (|)", correcta: false },
      { texto: "Intersecci√≥n (&)", correcta: false },
      { texto: "Diferencia (-)", correcta: true },
      { texto: "Diferencia sim√©trica (^)", correcta: false }
    ]
  },
  {
    texto: "¬øCu√°l es la diferencia entre remove() y discard() en conjuntos?",
    opciones: [
      { texto: "remove() elimina todos los elementos, discard() solo uno", correcta: false },
      { texto: "remove() da error si el elemento no existe, discard() no", correcta: true },
      { texto: "discard() es m√°s r√°pido que remove()", correcta: false },
      { texto: "No hay diferencia, son lo mismo", correcta: false }
    ]
  },
  {
    texto: "Si A = {1,2,3} y B = {3,4,5}, ¬øqu√© devuelve A ^ B?",
    opciones: [
      { texto: "{1, 2, 3, 4, 5}", correcta: false },
      { texto: "{3}", correcta: false },
      { texto: "{1, 2, 4, 5}", correcta: true },
      { texto: "{1, 2}", correcta: false }
    ]
  }
]
</script>